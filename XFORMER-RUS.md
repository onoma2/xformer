# XFORMER Руководство пользователя

## 0. ПРЕДУПРЕЖДЕНИЯ

Обновление основано на форке Phazerville оригинальной прошивки, поэтому 
Mebitek и другие функции отсутствуют. Новые модуляционные ROUTES не реализованы (пока).
Функциональность MIDI и Launchpad НЕ ТЕСТИРОВАЛИСЬ вообще.

Важно отметить, что 99,5% кода было написано музыкальными помощниками,
которых можно купить за пару долларов в месяц.

Я тестировал это на своем устройстве и, кажется, все, что мне важно, работает. Но без обратной совместимости, без гарантий, без искренних или неискренних соболезнований не планируется.

Используйте на свой страх и риск. Сделайте резервную копию ваших проектов на отдельную SD.




## 1. Введение

Это руководство охватывает специфичные для XFORMER функции:

   - Algo Track (На основе идеи TINRS Tuesday алгоритмических синтезов и 
его открытый исходный код).
   - Note Track:
   	- Harmony Engine (Вдохновлен Instruo Harmonaig и основан на его руководстве),
	- Accumulator (Вдохновлен Intellijel Metropolix и основан на его руководстве).
	- Базовый Pulse Count и Gate Modes (то же, что и ранее)

Предполагается, что вы уже знакомы со стандартной функциональностью Westlicht PER|FORMER.

Это руководство будет сосредоточено исключительно на этих новых функциях, предоставляя подробные описания, практические примеры и важные ярлыки, чтобы помочь вам интегрировать их в ваш музыкальный рабочий процесс.

## 2. Algo Track

### 2.1 Что такое Algo Track?

Algo Track - это особый тип трека, который генерирует музыкальный контент алгоритмически. Большинство алгоритмов даже не псевдослучайны, поэтому одинаковые параметры будут давать одинаковые результаты. На практике количество этих результатов бесконечно, поскольку у вас довольно много значений для выбора.

Чтобы включить Algo Track:
1. Перейдите на страницу настроек трека для выбранного трека
2. Измените тип трека на "Algo"
3. После включения трек больше не будет реагировать на вручную запрограммированные ноты, а вместо этого будет управляться выбранным алгоритмом.

### 2.2 Обзор интерфейса

Когда трек установлен на тип Algo, его страница интерфейса изменяется, чтобы отобразить элементы управления, специфичные для алгоритмического движка. Интерфейс обеспечивает доступ к 3 страницам параметров:

- **Shift-S1**: Main UI

    	**Page 1:** Algorithm, Flow, Ornament, Power

    	**Page 2:** Loop, Scan, Rotate, CV Mode

    	**Page 3:** Skew, Gate Offset, Glide, Trill

Ключевые элементы включают:

- **Algorithm Selector:** Выбор из 21 встроенного алгоритма (0-20)
- **Flow (0-16):** Контролирует генерацию ритма, часто инициализируя основной RNG поведения алгоритма
- **Ornament (0-16):** Контролирует вариации и вторичные параметры, часто инициализируя дополнительный RNG
- **Power (0-16):** Контролирует плотность и вероятность срабатывания. Power=0 равно
без звука.
- **Loop Length:** Установка длины ритма (0=Бесконечно, 1-128 для конечных циклов)
- **Output Display:** Визуальная обратная связь сгенерированных нот и гейтов

- **Shift-S2**: открывает divisor, root, octave и menu

- **Shift-S3**: открывает menu с теми же элементами управления, что и 3 страницы основного UI

### 2.3 Алгоритмы

XFORMER включает 21 разнообразный алгоритм Tuesday, каждый из которых предлагает уникальный подход к генеративным синтезам. Оригинальные алгоритмы Tuesday были адаптированы для использования 2 пар Gate-CV (gate+cv, accent+velocity) к 1 паре трека Performer, поэтому акценты и скорости были переведены в длину гейтов и слайсы, где это возможно. Алгоритмы не знают о темпе проекта и делении часов трека, поэтому если что-то звучит неправильно, отрегулируйте темп трека и измените POWER.

**0. SIMPLE** - Базовый тестовый ритм с восходящими/нисходящими октавами или хроматическими прогулками
- Flow: Определяет режим (0-8 = восходящие/нисходящие октавы, 9-16 = хроматическая прогулка) и скорость прогулки
- Ornament: Контролирует вероятность акцента и скорость

**1. TRITRANCE** - Немецкий минимальный стиль арпеджио на основе 3-фазного цикла
- Flow: Инициализирует основной RNG для b1 (высокая нота) и b2 (смещение фазы)
- Ornament: Инициализирует дополнительный RNG для b3 (смещение ноты для изменения октав)
- Создает эволюционные 3-фазные ритмы с вероятностными операциями

**2. STOMPER** - Эйсидовые басовые ритмы со слайсами и переходами состояний машины
- Flow: Инициализирует режимы ритма (дополнительный RNG)
- Ornament: Инициализирует выбор ноты (основной RNG)
- Использует сложную 14-состоянную машину с различным поведением

**3. MARKOV** - Генерация мелодий по цепям Маркова с использованием матрицы перехода 8x8x2
- Flow: Участвует в генерации матрицы (основной RNG)
- Ornament: Участвует в генерации матрицы (дополнительный RNG)
- Каждый выбор ноты зависит от двух предыдущих нот в последовательности

**4. CHIPARP** - Чиптюн арпеджио с аккордовыми прогрессиями
- Flow: Инициализирует основной RNG для генерации аккордов
- Ornament: Инициализирует RNG аккордов и определяет направление воспроизведения
- Генерирует 4-тактные ритмы аккордов, которые обычно играют ноты (0, 2, 4, 6) + смещение базы

**5. GOACID** - Гоа/психоделические эйсид ритмы с систематической транспозицией
- Flow: Инициализирует RNG выбора ноты
- Ornament: Инициализирует RNG акцента и устанавливает флаги ритма
- Применяет систематическую транспозицию (+3 полутона, -5 полутона в зависимости от условий)

**6. SNH** - Алгоритм случайного блуждания Sample & Hold
- Flow: Инициализирует основной RNG
- Ornament: Инициализирует дополнительный RNG
- Создает эволюционные значения CV с помощью отфильтрованного случайного блуждания

**7. WOBBLE** - Двухфазный LFO бас с чередующимися ритмами
- Flow: Инициализирует основной RNG
- Ornament: Инициализирует дополнительный RNG
- Использует два разных осциллятора фазы для генерации нот

**8. TECHNO** - Клубные ритмы four-on-floor с ритмами кика и хай-хэта,
которые смешиваются на выходе Gate и адаптированы для генерации высоты. Не
предназначены для создания ритмов, а скорее техно мелодичных грувов.
- Flow: Определяет тип ритма кика (4 вариации),
- Ornament: Определяет тип ритма хай-хэта (4 вариации)
- Создает ритмы кика и ритмы хай-хэта в офф-биты

**9. FUNK** - Синкопированные фанковые грувы с гост-нотами
- Flow: Определяет выбор ритма (8 ритмов)
- Ornament: Определяет синкопацию и вероятность гост-нот
- Включает гост-ноты с уменьшенной скоростью

**10. DRONE** - Устойчивые дроновые текстуры с медленным движением
- Flow: Определяет базовую ноту
- Ornament: Определяет интервал и вариацию
- Создает устойчивые ноты с очень длинной длиной гейтов

**11. PHASE** - Минималистичные фазовые ритмы с постепенными сдвигами
- Flow: Определяет содержимое ритма
- Ornament: Определяет скорость дрифта фазы
- Создает ритм, который постепенно смещает позицию со временем

**12. RAGA** - Индийские классические мелодичные ритмы с традиционными шкалами
- Flow: Определяет тип шкалы (Bhairav, Yaman, Todi, Kafi-like)
- Ornament: Определяет тип орнамента
- Использует традиционные индийские классические шкалы и мелодичные движения

**13. AMBIENT** - Гармонический дрон и планировщик событий
- Flow: Устанавливает коренную ноту дрон-аккорда
- Ornament: Контролирует случайность временных событий
- Создает гармонические дроны с запланированными событиями

**14. ACID** - Ритмы в стиле 303 со слайсами и октавными акцентами
- Flow: Инициализирует основной RNG для 8-тактной последовательности
- Ornament: Инициализирует ритм акцентов и маску октав
- Классические ритмы Roland TB-303 со слайсами и акцентами

**15. DRILL** - Ролы хай-хэта в стиле UK Drill и басовые слайсы
- Flow: Инициализирует основной RNG
- Ornament: Контролирует режим триолей (высокий ornament = триоли)
- Характерные ритмы UK Drill с ролями хай-хэта и басовыми слайсами

**16. MINIMAL** - Стаккато- burst и промежутки тишины
- Flow: Контролирует длину burst (2-8 тактов)
- Ornament: Контролирует плотность кликов и длину тишины
- Создает стаккато- burst, разделенные промежутками тишины

**17. KRAFT** - Точные механические последовательности
- Flow: Инициализирует основной RNG для базовой ноты
- Ornament: Инициализирует маску гост-нот
- Ритмы в стиле Kraftwerk точных механических повторений

**18. APHEX** - Полиритмический секвенсор событий
- Flow: Инициализирует ритмы для 3 различных треков
- Ornament: Устанавливает начальные фазовые позиции
- Создает полиритмические ритмы в разных временных сигнатурах

**19. AUTECH** - Алгоритмический двигатель трансформации
- Flow: Контролирует тайминг правил
- Ornament: Создает последовательность правил трансформации
- Создает эволюционные ритмы с алгоритмическими трансформациями

**20. STEPWAVE** - Шагание по шкале с хроматическим трелем
- Flow: Контролирует направление шага шкалы
- Ornament: Контролирует направление треля и размер шага
- Создает основанное на шкале шагание с хроматическими трель-вариациями

### 2.4 Параметры общие для каждого Algo

#### Scan
- **Диапазон:** 0 до (128 - actualLoopLength)
- **Функция:** Определяет точку смещения на ленте длиной 128 шагов, откуда алгоритм считывает свои данные, чтобы вы могли выбрать, какой более короткий цикл воспроизводить, ожидая, что он повторяется.
- **Эффект:** Для конечных циклов scan смещает окно в буфере предварительно сгенерированного ритма
- **Использование:** Позволяет получить доступ к различным разделам бесконечного вывода алгоритма без изменения других параметров

#### Rotate
- **Диапазон:** Биполярный (зависит от длины цикла: от -maxRot до +maxRot, где maxRot = loopLength - 1)
- **Функция:** Поворачивает начальную точку внутри конечных циклов
- **Эффект:** Сдвигает весь ритм вперед или назад в пределах границ цикла
- **Использование:** Применимо только к конечным циклам (loopLength > 0), не оказывает эффекта на бесконечные циклы
- **Примечание:** Работает в сочетании с scan - rotate сдвигает внутри цикла первым, затем scan смещает весь цикл в бесконечную ленту

#### Glide
- **Диапазон:** 0 до 100%
- **Функция:** Вероятность скольжения по высоте между нотами
- **Эффект:** Когда происходит переход ноты, есть шанс в процентах (определяемый этим параметром), что произойдет скольжение
- **Использование:** Каждый алгоритм может реализовать скольжение по-разному, но в целом влияет на поведение портаменто/слайса между нотами
- **Реализация:** Алгоритм потребляет случайное значение (для согласованной генерации ритма), даже если скольжение не происходит

#### GOffs
- **Диапазон:** 0 до 100%
- **Функция:** Вероятность смещения гейта, если это обрабатывается алго, или просто
вероятность смещения гейта. Результаты могут варьироваться


#### CV Update Mode
- **Опции:** Free или Gated
- **Free Mode:** CV output обновляется на каждом шаге независимо от состояния гейта (непрерывная эволюция напряжения CV), хорош для slide-heavy algos.
- **Gated Mode:** CV output обновляется только при срабатывании гейта (оригинальное поведение Tuesday, где CV изменяется только с нотными событиями)
- **Эффект:** Изменяет характер модуляции высоты - Free mode создает непрерывную эволюцию высоты, Gated mode создает ступенчатые изменения, следующие за ритмом

#### Trill
- **Диапазон:** 0 до 100%
- **Функция:** Вероятность повторного срабатывания/трелящего эффекта на определенных нотах
- **Эффект:** Добавляет быструю альтернацию между основной нотой и вариантом (часто на интервале секунды или терции)
- **Использование:** Алгоритмы, поддерживающие трель, будут использовать этот параметр для определения, как часто добавлять трель-эффекты
- **Примечание:** Не все алгоритмы поддерживают трель - он реализуется по алгоритмам в зависимости от музыкального контекста

#### Skew
- **Диапазон:** -8 до +8
- **Функция:** Скос плотности по циклу в зависимости от позиции, работает от
настройки базовой POWER, поэтому имеет эффект, когда POWER<8.
- **Эффект:**
- **Положительные значения (+1 до +8):** Создает эффект нарастания, где плотность увеличивается к концу цикла (первая часть при базовой мощности, последняя часть при максимальной мощности 16)
- **Отрицательные значения (-1 до -8):** Создает эффект затухания, где плотность уменьшается к концу цикла (первая часть при максимальной мощности 16, последняя часть при базовой мощности)
- **Ноль:** Нет скоса (плотность одинакова на протяжении всего цикла)
- **Использование:** Создает динамическую вариацию плотности нот по длине вашего цикла для более музыкальных и эволюционных ритмов

### 2.6 Ярлыки, специфичные для TuesdayTrack

- **F1-F4:** Выбрать параметр на текущей странице, вращать энкодер для изменения
- **F5:** Переход к следующей странице параметров (Page 1 → Page 2 → Page 3 → Page 1)
- **Shift+F5:** Заново инициализировать алгоритм (генерирует новый случайный ритм при сохранении параметров)
- **Context Menu (Long Press):**
  - **INIT:** Сброс всех параметров TuesdayTrack к значениям по умолчанию (устанавливает алгоритм на 0, flow на 0, ornament на 0 и т.д.)
  - **RESEED:** Сгенерировать ритм алгоритма заново с текущими параметрами

## 3. Harmony (Note Track Enchancement)

### 3.1 Как работает система гармонии

Harmony Engine создает сложные гармонические отношения между треками, генерируя аккорды на основе ступеней шкалы и применяя различные гармонические трансформации. Он работает, беря тонику с "Master" трека и генерируя гармонизированные аккордовые тона, которые могут быть назначены "Follower" трекам.

Система использует сочетание:

- **Scale intervals:** На основе выбранного режима (Ionian, Dorian, Phrygian и т.д.)
- **Chord qualities:** Определяются режимом (Major7, Minor7, Dominant7, HalfDim7)
- **Inversions:** Root, 1st, 2nd, и 3rd inversions
- **Voicings:** Close, Drop2, Drop3, и Spread voicings
- **Transpose:** Глобальная транспозиция всех аккордовых тонов

### 3.2 Различные режимы и настройки

**Harmony Modes:**

- **Ionian (0):** Мажорная шкала - I∆7, ii-7, iii-7, IV∆7, V7, vi-7, viiø
- **Dorian (1):** Дорийский режим - i-7, ii-7, ♭III∆7, IV7, v-7, viø, ♭VII∆7
- **Phrygian (2):** Фригийский режим - i-7, ♭II∆7, ♭III7, iv-7, vø, ♭VI∆7, ♭vii-7
- **Lydian (3):** Лидийский режим - I∆7, II7, iii-7, #ivø, V∆7, vi-7, vii-7
- **Mixolydian (4):** Миксолидийский режим - I7, ii-7, iiiø, IV∆7, v-7, vi-7, ♭VII∆7
- **Aeolian (5):** Натуральный минор - i-7, iiø, ♭III∆7, iv-7, v-7, ♭VI∆7, ♭VII7
- **Locrian (6):** Уменьшенная шкала - iø, ♭II∆7, ♭iii-7, iv-7, ♭V∆7, ♭VI7, ♭vii-7

**Voicing Options:**

- **Close (0):** Все аккордовые тона в ближайшем возможном положении
- **Drop2 (1):** Вторая по высоте нота опущена на октаву вниз
- **Drop3 (2):** Третья по высоте нота опущена на октаву вниз
- **Spread (3):** Третья и пятая над тоникой, септима на октаву выше

### 3.3 Как использовать Harmony Roles (Master/Follower)

**Настройка отношений Master/Follower:**
1. Настройте один трек как "Master" трек (обычно Note track, играющий ступени шкалы)
2. Включите Harmony Engine на Master треке с желаемыми настройками
3. Установите Following type на ДРУГОМ нотном треке
4. Каждый Master трек может генерировать до 4 гармонизированных выходов (root, third, fifth, seventh)
5. По умолчанию в настройках Performer треки, обозначенные как Followers, обновят
их CV output на Gate events. Поэтому включите гейты, где вы хотите услышать аккорд.

**Master Track Configuration:**
- 
- Тоника аккорда определяется текущей нотой Master трека
Harmony Engine преобразует эти ступени шкалы в аккордовые тона на основе выбранного режима
- Доступны переступеневые переопределения Inversion и Voicing на слое кнопок NOTE(F4)
для Master треков (нажмите F4 несколько раз, чтобы попасть туда)

**Follower Track Configuration:**
- Follower треки получают гармонизированные аккордовые тона от Master
- Каждому Follower можно назначить определенный аккордовый тон (root, third, fifth, или seventh)

```
!!! Followers НЕ изменяют свою Harmony Scale автоматически, если вы изменяете
master!!!
```

- Несколько Followers могут быть назначены одному аккордовому тону для утолщения
- Доступны переступеневые переопределения Chord Degree (root,3,5,7) на слое кнопок NOTE(F4)
для Master треков (нажмите F4 несколько раз, чтобы попасть туда)

### 3.4 Примеры создания гармоний

**Пример мажорной гармонии:**

- Master Track: Ionian mode, Scale Degree 0 (root)
- Chord Output: Cmaj7 (C-E-G-B)
- Follower 1: Assigned to Root → Играет C
- Follower 2: Assigned to Third → Играет E
- Follower 3: Assigned to Fifth → Играет G
- Follower 4: Assigned to Seventh → Играет B

**Пример минорной гармонии:**

- Master Track: Dorian mode, Scale Degree 1 (ii chord)
- Chord Output: Dm7 (D-F-A-C)
- Follower 1: Close voicing → D-F-A-C
- Follower 2: Drop2 voicing → D-A-C-F

**Пример сложной гармонии:**

- Master Track: Mixolydian mode, Scale Degree 4 (v chord)
- Chord Output: G7 (G-B-D-F)
- Follower 1: Root position → G-B-D-F
- Follower 2: 1st inversion → B-D-F-G
- Follower 3: 2nd inversion → D-F-G-B
- Follower 4: 3rd inversion → F-G-B-D

### 3.5 Ярлыки, связанные с гармонией

- **SECOND PRESS of Shift-S3** Harmony Engine
- **Voicing Quick Switch:** Используйте энкодер для переключения между вариантами voicing (Close, Drop2, Drop3, Spread)
- **Inversion Control:** Используйте параметр для переключения между inversions (0-3)
- **Transpose Adjust:** Используйте энкодер с shift для регулировки transpose большими шагами

## 4. Accumulator

### 4.1 Что делает Accumulator

Accumulator выполняет функцию счетчика, который может считать вверх, вниз или в сложных ритмах на основе входных триггеров. Accumulator сохраняет текущее значение, которое может использоваться для модуляции различных параметров в реальном времени. В настоящее время он используется ТОЛЬКО для перемещения высоты трека при каждом проходе головки воспроизведения. Не реализованы все режимы обновления.

Ключевые особенности:
- Считает события триггеров и сохраняет текущее значение
- Поддерживает несколько режимов счета (Wrap, Pendulum, Random, Hold)
- Обеспечивает унитарный или биполярный диапазоны вывода
- Может срабатывать по событиям шага, гейта или retrigger

```
!!! В настоящее время события retrigger увеличивают счетчик Accumulator на число
retriggers шага, поэтому, модулируя значение retrigger, вы можете получить разное
количество приращений шкалы!!!
```

Accumulator включен по умолчанию. Нажмите NOTE(F4) несколько раз, чтобы попасть на
страницу Accumulator. Нажмите step и вращайте энкодер, чтобы изменить приращения accumulator для step. Маленькая постоянная точка появится в правом верхнем углу квадрата.

Число в верхней строке указывает текущий номер счетчика accumulator.

### 4.2 Различные режимы и настройки

**Polarity Options:**

- **Unipolar (0):** Диапазон вывода от 0 до maxValue
- **Bipolar (1):** Диапазон вывода от minValue до maxValue (центрован относительно 0)

**Activation Options:**

- **TRACK:** Все шаги будут транспонированы с увеличением следующего счетчика accumulator.
- **STAGE:** Только шаги с accumulator triggers на них будут обновлены.

**Direction Options:**

- **Up (0):** Счет в положительном направлении
- **Down (1):** Счет в отрицательном направлении
- **Freeze (2):** Удержание текущего значения, без счета

**Order (Counting Pattern):**

- **Wrap (0):** Обертка при достижении границ (0→max→0 или max→0→max)
- **Pendulum (1):** Отскок между минимальными и максимальными значениями (0→max→0→max...)
- **Random (2):** Прыжки к случайным значениям в диапазоне
- **Hold (3):** Движение к границам и удержание при достижении

**Trigger Modes:**

- **Step (0):** Отвечает на продвижение шага
- **Gate (1):** Отвечает на события гейта
- **Retrigger (2):** Отвечает на события retrigger (добавляет количество retriggers к)


### 4.5 Ярлыки, связанные с accumulator

- **SECOND PRESS of Shift-S3** Переход на страницу ACCUM для основных настроек
- **THIRD PRESS of Shift-S3** Доступ к детальным параметрам на странице ACCST
**Shift+F4:** Сброс accum к 0



## Pulse Count и Gate Mode (Note Track Enchancement)

### Pulse Count

  Pulse Count - это функция, которая позволяет одному шагу в последовательности играть
  несколько тактовых импульсов перед переходом к следующему шагу. Это позволяет более
  сложные ритмические ритмы, где отдельные шаги могут быть подразделены.

  **Технические детали**:

   - Значения Pulse Count варьируются от 0 до 7, представляя 1 до 8 импульсов
   - Значение 0 означает, что шаг продвигается после 1 импульса (нормальное поведение)
   - Значение 7 означает, что шаг удерживается в течение 8 общих импульсов перед продвижением

### Gate Mode

  Gate Mode определяет, какие из нескольких импульсов (при использовании Pulse Count) будут
  на самом деле срабатывать сигналом гейта. Это позволяет создавать сложные ритмические ритмы, где не
  каждый импульс в шаге обязательно вызывает выход.

  **Технические детали**:
   - Значения Gate Mode варьируются от 0 до 3, представляя 4 разных режима
   - Реализовано как 2-битное поле в структуре данных шага
   - Работает в сочетании с Pulse Count для создания ритмических вариаций

  Четыре Gate Modes:

   1. All (0): Срабатывание гейтов на каждом импульсе (по умолчанию, обратно совместимо)
      - Когда pulse count установлен на 3 (4 импульса), все 4 импульса будут срабатывать гейты
      - Создает самый базовый ритм retriggering

   2. First (1): Один гейт только на первом импульсе
      - Только первый импульс в последовательности срабатывает гейт
      - Шаг все еще удерживается в течение указанного количества импульсов, но срабатывает
        только один раз
      - Полезно для создания более длинных нот с ритмическим таймингом

   3. Hold (2): Один длинный гейт на протяжении всего времени
      - Один гейт начинается на первом импульсе и продолжается до конца
      - Длина гейта увеличивается, чтобы охватить все импульсы, определенные pulse count
      - Создает устойчивые ноты, которые следуют за таймингом pulse count

   4. FirstLast (3): Гейты на первом и последнем импульсе только
      - Гейты срабатывают на первом импульсе и на последнем импульсе последовательности
      - Создает "обложенный" ритм с тишиной между
      - Полезно для создания ритмических акцентов в начале и конце удерживаемой ноты

## 5. Global Output Rotation (CV & Gate)

Эта функция позволяет динамически вращать, какие треки назначаются на физические выходы CV и Gate. Это действует как виртуальный 8-канальный последовательный переключатель, позволяя вашим модуляционным ритмам "spin" вокруг ваших подключенных модулей.

### Как это работает

Вращение применяется к поиску физическим выходом своего назначенного трека. Когда применяется вращение, выход будет искать свой источник из смещенной позиции в динамически определенном "пуле" вращающихся треков.

- **Selective Rotation:** Только треки, явно включенные для вращения (через Routing page), будут участвовать. Статические треки остаются нетронутыми.
- **Dynamic Pool:** Система идентифицирует все треки, в настоящее время нацеленные на вращение. Эти треки формируют "пул", который вращается сам по себе.

### Инструкции по настройке

1.  **Настройка макета трека:**
    *   Перейдите на **Layout Page** (обычно нажав SHIFT + S2, затем выбрав "LAYOUT").
    *   Перейдите в **CV Output Mode** (F4). Для каждого физического CV output (1-8) выберите **Track**, который обычно должен его приводить в действие.
    *   Повторите для **Gate Output Mode** (F3).
    *   *Пример:* CV Out 1 -> Track 1, CV Out 2 -> Track 2, CV Out 3 -> Track 3.

2.  **Создание маршрута вращения:**
    *   Перейдите на **Routing Page** (обычно нажав SHIFT + S2, затем выбрав "ROUTING").
    *   Выберите **empty Route slot**.
    *   Установите **Target** в `CV Out Rot` (для CV output rotation) или `Gate Out Rot` (для Gate output rotation).
    *   Установите **Source** (например, `CV In 1`, медленный LFO или MIDI CC). Этот источник будет управлять скоростью и направлением вращения.
    *   Откорректируйте **Min** и **Max**, чтобы определить диапазон шагов вращения. По умолчанию 0 до 8, позволяя до 8 шагов вращения. Вы можете установить его на -8 до 8 для биполярного контроля.
    *   **Ключевой момент: Выберите треки для вращения.** В разделе "Tracks" на Routing page используйте маску выбора трека, чтобы **выбрать только те треки, которые вы хотите включить в этот пул вращения**. Например, если вы хотите, чтобы Tracks 1, 2 и 3 вращались, выберите Track 1, Track 2 и Track 3.
    *   **COMMIT** маршрут.

### Пример использования

*   **Цель:** Вращение 3 LFO (Track 1, 2, 3) через 3 входа фильтра (CV Out 1, 2, 3).
*   **Layout Page:**
    *   CV Out 1 -> Track 1
    *   CV Out 2 -> Track 2
    *   CV Out 3 -> Track 3
    *   CV Out 4 -> Track 4 (Static, например, для бас-линии)
*   **Routing Page:**
    *   Target: `CV Out Rot`
    *   Source: `CV In 1` (источник LFO)
    *   Min: `0`, Max: `3` (для вращения 3 шагов)
    *   Tracks: `X X X - - - - -` (Track 1, 2, 3 выбраны)
*   **Эффект:** По мере модуляции `CV In 1` от 0 до 3, вывод Track 1 будет двигаться от CV Out 1 -> 2 -> 3 -> 1, Track 2 будет двигаться 2 -> 3 -> 1 -> 2 и т. д. CV Out 4 останется статичным, всегда получая от Track 4.

## 6. Новые функции Curve Track

### Глобальная фаза

Функция глобальной фазы позволяет смещать позицию воспроизведения вашей кривой последовательности. Это сдвигает воспроизведение всей последовательности на заданную фазу, не изменяя фактические данные шагов.

- **Доступ:** Нажмите F5, чтобы циклически переключаться между режимами редактирования: Step → Phase → Wavefolder → Step
- **Функция:** Когда включено, последовательность будет считывать значения из позиции, смещенной на величину фазы
- **Диапазон:** 0.00 до 1.00 (можно регулировать энкодером, нажмите для шага 0.1, отпустите для шага 0.01)
- **Эффект:** Смещение фазы визуализируется более слабой вертикальной линией, показывающей позицию фазированного шага по сравнению с фактическим текущим шагом

### Ярлык Shift+Step для редактирования формы/минимума/максимума нескольких шагов

При выборе нескольких шагов в CurveSequence можно использовать Shift с энкодером для создания плавных переходов по выбранным шагам:

- **Редактирование формы нескольких шагов:** Выберите несколько шагов, нажмите Shift при повороте энкодера - это установит для всех выбранных шагов одну и ту же форму, но создаст плавный переход от минимальных к максимальным значениям по шагам
- **Shift+Enкодер с несколькими выбранными шагами:** Когда у вас выбрано несколько шагов и вы поворачиваете энкодер с нажатым Shift, создается градиент минимальных/максимальных значений по выбранным шагам

### Функции волнового сворачивания (Wavefolding)

CurveTrack включает расширенные возможности волнового сворачивания, доступные через кнопку фазы:

- **Доступ:** Нажмите F5 несколько раз, чтобы перейти на экран Wavefolder
- **Параметры:**
  - **FOLD:** Контролирует степень сворачивания (0.00 до 1.00) - увеличивает гармоническую сложность
  - **GAIN:** Контролирует усиление входного сигнала (0.00 до 2.00) - регулирует силу сигнала перед сворачиванием
  - **FILTER:** Контроль DJ-фильтра (-1.00 до 1.00) - применяет фильтр нижних частот (отрицательный) или фильтр верхних частот (положительный)
  - **XFADE:** Кроссфейд между оригинальным и обработанным сигналом (0.00 до 1.00) - смешивание между сухим и мокрым сигналами

### Функция контекстного меню LFO

Быстрый способ заполнить последовательности общими формами волн LFO:

- **Доступ:** Нажмите и удерживайте кнопку "STEP 5" на странице CurveSequence (а не на странице CurveSequenceEdit)
- **Опции:**
  - **TRI:** Паттерн треугольной волны, использующий формы кривой Triangle
  - **SINE:** Приближение синусоидальной волны, использующее чередование SmoothUp/SmoothDown
  - **SAW:** Паттерн пилообразной волны, использующий формы RampUp
  - **SQUA:** Паттерн прямоугольной волны, использующий чередование StepUp/StepDown

Эти функции расширяют возможности CurveTrack, позволяя создавать более сложные модуляционные паттерны и легче создавать последовательности CV в стиле LFO.

### Визуализация фазы

Когда глобальная фаза активна, движок продолжает отслеживать как фактическую позицию шага, так и позицию фазированного шага:

- Фактическая текущая позиция шага отображается более яркой вертикальной линией
- Позиция фазированного шага показывается более слабой вертикальной линией
- Эта визуальная обратная связь помогает понять, как смещение фазы влияет на воспроизведение последовательности

Эти новые функции делают CurveTrack значительно более мощным для создания сложных источников модуляции, от простых LFO до замысловатых эволюционирующих модуляционных паттернов с волновым сворачиванием и сдвигом фазы.